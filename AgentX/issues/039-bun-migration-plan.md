# Issue #009: Bun Migration Plan - å…¨é¢è¿ç§»åˆ° Bun ç”Ÿæ€

**Status**: ğŸ“‹ Planning
**Priority**: ğŸ”´ High
**Created**: 2025-12-27
**Assignee**: TBD

## èƒŒæ™¯ä¸åŠ¨æœº

AgentX ä½œä¸ºç»Ÿä¸€çš„ AI Runtime Platformï¼Œéœ€è¦æ„å»ºå¼ºå¤§çš„å·¥å…·æ‰§è¡Œå’Œæ²™ç®±èƒ½åŠ›ã€‚**å…¨é¢è¿ç§»åˆ° Bun æ˜¯ä¸å¯é€†è½¬çš„æˆ˜ç•¥å†³ç­–**ï¼Œä¸è€ƒè™‘å‘åå…¼å®¹æ€§ï¼Œä»»ä½•é˜»ç¢è¿ç§»çš„ä¾èµ–éƒ½å°†è¢«æ›¿æ¢æˆ–é‡å†™ã€‚

å½“å‰ä½¿ç”¨ pnpm + Node.js çš„æŠ€æœ¯æ ˆåœ¨æ€§èƒ½å’Œå¼€å‘ä½“éªŒä¸Šå­˜åœ¨å±€é™ï¼š

### å½“å‰ç—›ç‚¹

1. **æ€§èƒ½ç“¶é¢ˆ**
   - åŒ…å®‰è£…é€Ÿåº¦æ…¢ï¼ˆpnpm ~30sï¼‰
   - Node.js å¯åŠ¨æ—¶é—´é•¿ï¼ˆ~500msï¼‰
   - TypeScript éœ€è¦ç¼–è¯‘æ­¥éª¤ï¼ˆtsx/tsupï¼‰
   - æµ‹è¯•è¿è¡Œé€Ÿåº¦æ…¢ï¼ˆvitestï¼‰

2. **å·¥å…·é“¾å¤æ‚**
   - éœ€è¦å¤šä¸ªå·¥å…·ï¼špnpm + tsx + tsup + vitest
   - é…ç½®æ–‡ä»¶åˆ†æ•£
   - å¼€å‘ä½“éªŒä¸å¤Ÿæµç•…

3. **ä¸æœªæ¥è§„åˆ’ä¸ä¸€è‡´**
   - è®¡åˆ’æ·»åŠ  `@agentxjs/tool` å’Œ `@agentxjs/sandbox` åŒ…
   - å·¥å…·æ‰§è¡Œéœ€è¦é«˜æ€§èƒ½çš„å­è¿›ç¨‹ç®¡ç†
   - æ²™ç®±ç¯å¢ƒéœ€è¦å¿«é€Ÿå¯åŠ¨

### Bun çš„ä¼˜åŠ¿

| æŒ‡æ ‡            | Node.js + pnpm | Bun            | æ€§èƒ½æå‡  |
| --------------- | -------------- | -------------- | --------- |
| åŒ…å®‰è£…é€Ÿåº¦      | ~30s           | ~5s            | **6å€**   |
| å¯åŠ¨æ—¶é—´        | ~500ms         | ~100ms         | **5å€**   |
| TypeScript æ‰§è¡Œ | éœ€è¦ç¼–è¯‘       | åŸç”Ÿæ”¯æŒ       | **å³æ—¶**  |
| æµ‹è¯•è¿è¡Œ        | Jest/Vitest    | bun test       | **2-3å€** |
| æ‰“åŒ…å·¥å…·        | éœ€è¦ tsup      | å†…ç½® bun build | **ç»Ÿä¸€**  |

## è¿ç§»ç›®æ ‡

### 1. å®Œå…¨æ›¿æ¢åŒ…ç®¡ç†å™¨

```diff
- "packageManager": "pnpm@10.15.1"
+ "packageManager": "bun@1.3.5"
```

### 2. ç®€åŒ–å·¥å…·é“¾

**å½“å‰ä¾èµ–**ï¼š

```json
{
  "devDependencies": {
    "pnpm": "10.15.1",
    "tsx": "^4.19.2",
    "tsup": "...",
    "vitest": "...",
    "typescript": "^5.7.2"
  }
}
```

**è¿ç§»å**ï¼š

```json
{
  "packageManager": "bun@1.3.5",
  "devDependencies": {
    "typescript": "^5.7.2" // ä»…ç”¨äºç±»å‹æ£€æŸ¥
  }
}
```

### 3. ç»Ÿä¸€è„šæœ¬

```diff
{
  "scripts": {
-   "dev": "turbo run dev --filter=@agentxjs/portagent",
+   "dev": "bun --watch apps/portagent/src/index.ts",
-   "test": "turbo test",
+   "test": "bun test",
-   "build": "turbo build",
+   "build": "bun run build:all"
  }
}
```

## è¿ç§»è®¡åˆ’

### é˜¶æ®µ 1: å¼ºåˆ¶è¿ç§» + é—®é¢˜ä¿®å¤ (3-5 å¤©)

**ç›®æ ‡**: ç›´æ¥è¿ç§»ï¼Œé‡åˆ°é—®é¢˜ç«‹å³ä¿®å¤

**ä»»åŠ¡**:

- [ ] **Day 1: å¼ºåˆ¶åˆ‡æ¢åˆ° Bun**

  ```bash
  # åˆ é™¤ pnpm
  rm -rf node_modules pnpm-lock.yaml

  # å®‰è£… Bun
  curl -fsSL https://bun.sh/install | bash

  # å¼ºåˆ¶ä½¿ç”¨ Bun
  echo "bun@1.3.5" > .tool-versions
  bun install
  ```

- [ ] **Day 2: ä¿®å¤åŸç”Ÿæ¨¡å—**
  - [ ] æµ‹è¯• better-sqlite3
    - âœ… å¦‚æœæ­£å¸¸ â†’ ç»§ç»­
    - âŒ å¦‚æœå¤±è´¥ â†’ åˆ‡æ¢åˆ° `bun:sqlite` æˆ– Bun å…¼å®¹ç‰ˆæœ¬
  - [ ] å¤„ç† sharp
    - å°è¯•ç›´æ¥ä½¿ç”¨
    - å¦‚å¤±è´¥ â†’ æ›¿æ¢ä¸º `@napi-rs/image`
  - [ ] ç§»é™¤ node-pty
    - æ‰¾åˆ°æ‰€æœ‰ä½¿ç”¨çš„åœ°æ–¹
    - ç”¨ `Bun.spawn()` é‡å†™

- [ ] **Day 3: é‡å†™æµ‹è¯•**

  ```bash
  # åˆ é™¤ vitest
  bun remove vitest

  # é‡å†™æµ‹è¯•æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ä¸å…¼å®¹çš„è¯­æ³•ï¼‰
  find . -name "*.test.ts" -exec sed -i '' 's/vitest/bun:test/g' {} \;

  # è¿è¡Œæ‰€æœ‰æµ‹è¯•
  bun test
  ```

- [ ] **Day 4: é‡å†™æ„å»ºè„šæœ¬**

  ```bash
  # åˆ é™¤ tsup
  bun remove tsup

  # ä¸ºæ¯ä¸ªåŒ…åˆ›å»º build.ts
  # ä½¿ç”¨ Bun.build() API
  ```

- [ ] **Day 5: å…¨é¢éªŒè¯**
  - [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
  - [ ] æ‰€æœ‰åŒ…èƒ½å¤Ÿæ„å»º
  - [ ] Web åº”ç”¨èƒ½å¤Ÿè¿è¡Œ
  - [ ] Storybook èƒ½å¤Ÿå¯åŠ¨

**ä¸å¯å¦¥å**:

- âŒ ä¸ä¿ç•™ pnpm
- âŒ ä¸ä¿ç•™ vitest
- âŒ ä¸ä¿ç•™ tsup
- âŒ ä¸å›æ»šåˆ° Node.js

### é˜¶æ®µ 2: æ ¹ç›®å½•è¿ç§» (2-3 å¤©)

**ä»»åŠ¡**:

- [ ] æ·»åŠ  `bunfig.toml` é…ç½®
- [ ] æ·»åŠ  `.bunignore` æ–‡ä»¶
- [ ] ä¿®æ”¹ `package.json`:
  - [ ] æ›´æ–° `packageManager` å­—æ®µ
  - [ ] ç§»é™¤ pnpm ç‰¹å®šé…ç½®
  - [ ] åˆ é™¤ä¸å¿…è¦çš„ devDependencies
- [ ] æ›´æ–° `.gitignore`:
  - [ ] æ·»åŠ  `bun.lockb`
  - [ ] ç§»é™¤ `pnpm-lock.yaml`
- [ ] åˆ é™¤ `pnpm-workspace.yaml`ï¼ˆBun è‡ªåŠ¨è¯†åˆ« workspacesï¼‰

**é…ç½®æ–‡ä»¶**:

`bunfig.toml`:

```toml
[install]
exact = true
peer = true

[test]
coverage = true

[run]
bun = true
```

### é˜¶æ®µ 3: å„åŒ…è¿ç§» (3-4 å¤©)

**è¿ç§»é¡ºåº**ï¼ˆä¾èµ–å…³ç³»ä»ä¸‹å¾€ä¸Šï¼‰:

1. **@agentxjs/types** (é›¶ä¾èµ–)
   - [ ] æ›¿æ¢ `tsup` â†’ `bun build`
   - [ ] æ›¿æ¢ `vitest` â†’ `bun test`
   - [ ] æ›´æ–° build script

2. **@agentxjs/common** (ä¾èµ– types)
   - [ ] åŒä¸Š

3. **@agentxjs/runtime**
   - [ ] æµ‹è¯• better-sqlite3
   - [ ] éªŒè¯æ‰€æœ‰æµ‹è¯•é€šè¿‡

4. **@agentxjs/agent**
   - [ ] éªŒè¯æ‰€æœ‰æµ‹è¯•é€šè¿‡

5. **@agentxjs/ui**
   - [ ] ä¿æŒ Viteï¼ˆBun å®Œå…¨å…¼å®¹ï¼‰
   - [ ] æµ‹è¯• Storybook

6. **@agentxjs/portagent** (Web App)
   - [ ] æµ‹è¯•å¼€å‘æœåŠ¡å™¨
   - [ ] æµ‹è¯•ç”Ÿäº§æ„å»º

**æ¯ä¸ªåŒ…çš„è¿ç§»æ­¥éª¤**:

```bash
cd packages/[package-name]

# 1. æ›¿æ¢æµ‹è¯•æ¡†æ¶
- åˆ é™¤ vitest.config.ts
+ åˆ›å»º bunfig.toml (å¦‚æœéœ€è¦ç‰¹æ®Šé…ç½®)

# 2. æ›¿æ¢æ„å»ºå·¥å…·
- åˆ é™¤ tsup.config.ts
+ ä½¿ç”¨ bun build

# 3. æ›´æ–° package.json scripts
{
  "scripts": {
-   "dev": "tsup --watch",
+   "dev": "bun build src/index.ts --watch",
-   "build": "tsup",
+   "build": "bun build src/index.ts --outdir dist",
-   "test": "vitest run",
+   "test": "bun test"
  }
}

# 4. è¿è¡Œæµ‹è¯•
bun test

# 5. éªŒè¯æ„å»º
bun run build
```

### é˜¶æ®µ 4: CI/CD æ›´æ–° (1-2 å¤©)

**ä»»åŠ¡**:

- [ ] æ›´æ–° GitHub Actions:

  ```yaml
  - name: Setup Bun
    uses: oven-sh/setup-bun@v1
    with:
      bun-version: 1.3.5

  - name: Install dependencies
    run: bun install

  - name: Run tests
    run: bun test

  - name: Build
    run: bun run build
  ```

- [ ] æ›´æ–° lefthook é…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰
- [ ] æµ‹è¯•å®Œæ•´çš„ CI æµç¨‹

### é˜¶æ®µ 5: æ–‡æ¡£æ›´æ–° (1 å¤©)

**ä»»åŠ¡**:

- [ ] æ›´æ–° README.md:
  - [ ] æ›¿æ¢å®‰è£…æŒ‡å—ï¼ˆpnpm â†’ bunï¼‰
  - [ ] æ›´æ–°å‘½ä»¤ç¤ºä¾‹
- [ ] æ›´æ–° CONTRIBUTING.md
- [ ] æ›´æ–° CLAUDE.md
- [ ] åˆ›å»ºè¿ç§»æŒ‡å— (MIGRATION.md)

## ä¾èµ–å¤„ç†ç­–ç•¥ - ä¸å…¼å®¹å°±æ›¿æ¢

**åŸåˆ™**: ä»»ä½•ä¸å…¼å®¹ Bun çš„ä¾èµ–éƒ½å°†è¢«æ›¿æ¢æˆ–é‡å†™ï¼Œä¸è€ƒè™‘å‘åå…¼å®¹ã€‚

| ä¾èµ–               | å½“å‰ç”¨é€” | Bun å…¼å®¹æ€§    | è§£å†³æ–¹æ¡ˆ                                   | è¡ŒåŠ¨ |
| ------------------ | -------- | ------------- | ------------------------------------------ | ---- |
| **better-sqlite3** | æ•°æ®åº“   | âœ… å®Œå…¨å…¼å®¹   | ç»§ç»­ä½¿ç”¨                                   | ä¿ç•™ |
| **sharp**          | å›¾ç‰‡å¤„ç† | âš ï¸ å¯èƒ½é—®é¢˜   | â†’ `@napi-rs/image` æˆ– `bun:image` (Future) | æ›¿æ¢ |
| **node-pty**       | ç»ˆç«¯æ¨¡æ‹Ÿ | âŒ ä¸å…¼å®¹     | â†’ ä½¿ç”¨ `Bun.spawn()` + è‡ªå·±å®ç°ä¼ªç»ˆç«¯      | é‡å†™ |
| **turbo**          | Monorepo | âœ… å…¼å®¹       | ç»§ç»­ä½¿ç”¨                                   | ä¿ç•™ |
| **vite**           | å‰ç«¯æ„å»º | âœ… å…¼å®¹       | ç»§ç»­ä½¿ç”¨                                   | ä¿ç•™ |
| **storybook**      | UI å¼€å‘  | âœ… å…¼å®¹       | ç»§ç»­ä½¿ç”¨                                   | ä¿ç•™ |
| **vitest**         | æµ‹è¯•     | â†’ `bun test`  | Bun å†…ç½®                                   | åˆ é™¤ |
| **tsup**           | æ‰“åŒ…     | â†’ `bun build` | Bun å†…ç½®                                   | åˆ é™¤ |
| **tsx**            | TS æ‰§è¡Œ  | â†’ `bun`       | Bun å†…ç½®                                   | åˆ é™¤ |
| **eslint**         | ä»£ç æ£€æŸ¥ | âœ… å…¼å®¹       | ç»§ç»­ä½¿ç”¨                                   | ä¿ç•™ |
| **prettier**       | æ ¼å¼åŒ–   | âœ… å…¼å®¹       | ç»§ç»­ä½¿ç”¨                                   | ä¿ç•™ |

### é‡ç‚¹å¤„ç†é¡¹

#### 1. node-pty æ›¿æ¢æ–¹æ¡ˆ

**å½“å‰ç”¨é€”**: å¯èƒ½ç”¨äºç»ˆç«¯ä»¿çœŸæˆ–è¿›ç¨‹æ§åˆ¶

**è§£å†³æ–¹æ¡ˆ**:

```typescript
// ä¸å†ä¾èµ– node-ptyï¼Œä½¿ç”¨ Bun åŸç”Ÿèƒ½åŠ›
import { spawn } from "bun";

// Bun çš„ spawn å·²ç»è¶³å¤Ÿå¼ºå¤§
const proc = spawn(["bash"], {
  stdin: "pipe",
  stdout: "pipe",
  stderr: "pipe",
  env: { ...process.env, TERM: "xterm-256color" },
});

// å¦‚æœéœ€è¦ PTYï¼Œç”¨çº¯ JS å®ç°æˆ–ç­‰ Bun å®˜æ–¹æ”¯æŒ
```

**è¡ŒåŠ¨**:

- æ‰¾åˆ°æ‰€æœ‰ä½¿ç”¨ node-pty çš„åœ°æ–¹
- è¯„ä¼°æ˜¯å¦çœŸçš„éœ€è¦ PTYï¼ˆå¤§éƒ¨åˆ†æƒ…å†µä¸éœ€è¦ï¼‰
- ç”¨ `Bun.spawn()` é‡å†™

#### 2. sharp æ›¿æ¢æ–¹æ¡ˆ

**å½“å‰ç”¨é€”**: å›¾ç‰‡å¤„ç†

**è§£å†³æ–¹æ¡ˆ**:

```typescript
// æ–¹æ¡ˆ A: ä½¿ç”¨ @napi-rs/image (Rust åŸç”Ÿï¼ŒBun å‹å¥½)
import { transform } from "@napi-rs/image";

// æ–¹æ¡ˆ B: ä½¿ç”¨ Web API (å¦‚æœåªæ˜¯ç®€å•å¤„ç†)
const img = await fetch(url).then((r) => r.blob());

// æ–¹æ¡ˆ C: ç­‰ Bun å®˜æ–¹ image API
```

**è¡ŒåŠ¨**:

- è¯„ä¼°å½“å‰å¯¹ sharp çš„ä¾èµ–ç¨‹åº¦
- å¦‚æœåªæ˜¯ç®€å•çš„ resizeï¼Œç”¨ `@napi-rs/image`
- å¦‚æœå¤æ‚ï¼Œå¯ä»¥æš‚æ—¶ä¿ç•™ sharpï¼ˆå¼ºåˆ¶ä½¿ç”¨ Bun å…¼å®¹ç‰ˆæœ¬ï¼‰

## æ¿€è¿›ç­–ç•¥ - ç ´é‡œæ²‰èˆŸ

**ä¸è®¾å›æ»šè®¡åˆ’**ã€‚è¿™æ˜¯å•å‘è¿ç§»ï¼Œé‡åˆ°é—®é¢˜å°±è§£å†³é—®é¢˜ï¼Œä¸è€ƒè™‘å›é€€ã€‚

### åº”å¯¹ç­–ç•¥

1. **é‡åˆ°ä¸å…¼å®¹çš„ä¾èµ–**
   - âŒ ä¸å›æ»š
   - âœ… æ‰¾æ›¿ä»£å“
   - âœ… é‡å†™åŠŸèƒ½
   - âœ… åˆ é™¤ä¸å¿…è¦çš„åŠŸèƒ½

2. **better-sqlite3 å¦‚æœæœ‰é—®é¢˜**
   - æ–¹æ¡ˆ A: ç”¨ Bun å®˜æ–¹çš„ `bun:sqlite` (é¦–é€‰)
   - æ–¹æ¡ˆ B: ç”¨ `better-sqlite3` çš„ Bun å…¼å®¹ç‰ˆæœ¬
   - æ–¹æ¡ˆ C: è‡ªå·±ç”¨ Bun FFI å°è£… sqlite3

3. **æµ‹è¯•æ¡†æ¶è¿ç§»å¤±è´¥**
   - ç›´æ¥ç”¨ `bun test`ï¼Œé‡å†™æ‰€æœ‰æµ‹è¯•æ–‡ä»¶
   - Bun test è¯­æ³•å’Œ Jest/Vitest 99% å…¼å®¹
   - ä¸å…¼å®¹çš„éƒ¨åˆ†æ‰‹åŠ¨æ”¹å†™

4. **æ„å»ºå¤±è´¥**
   - ç”¨ `bun build` é‡å†™æ„å»ºè„šæœ¬
   - ä¸å†ä¾èµ– tsup/esbuild çš„å¤æ‚é…ç½®
   - ç®€åŒ–æ‰“åŒ…æµç¨‹

### ä¸å¯åå•†çš„åŸåˆ™

1. âœ… **å¿…é¡»ç”¨ Bun ä½œä¸ºåŒ…ç®¡ç†å™¨**ï¼ˆåˆ é™¤ pnpmï¼‰
2. âœ… **å¿…é¡»ç”¨ `bun test`**ï¼ˆåˆ é™¤ vitestï¼‰
3. âœ… **å¿…é¡»ç”¨ `bun build`**ï¼ˆåˆ é™¤ tsupï¼‰
4. âœ… **å¿…é¡»ç”¨ `bun run`** ç›´æ¥æ‰§è¡Œ TypeScriptï¼ˆåˆ é™¤ tsxï¼‰
5. âœ… **æ‰€æœ‰è„šæœ¬ç”¨ Bun Shell**ï¼ˆBun å†…ç½® Shell APIï¼‰

## é¢„æœŸæ”¶ç›Š

### å¼€å‘ä½“éªŒ

1. **å®‰è£…é€Ÿåº¦**: 30s â†’ 5sï¼ˆèŠ‚çœ 83%ï¼‰
2. **æµ‹è¯•é€Ÿåº¦**: æå‡ 2-3 å€
3. **çƒ­é‡è½½**: æ›´å¿«çš„é‡å¯é€Ÿåº¦
4. **TypeScript**: é›¶é…ç½®å³å¯è¿è¡Œ

### å·¥å…·é“¾ç®€åŒ–

**å½“å‰**:

```
pnpm + tsx + tsup + vitest + typescript
```

**è¿ç§»å**:

```
bun + typescript (ä»…ç±»å‹æ£€æŸ¥)
```

### æœªæ¥ååŒ

ä¸ºå³å°†æ·»åŠ çš„åŒ…æä¾›æ›´å¥½çš„åŸºç¡€ï¼š

```typescript
// @agentxjs/sandbox - ä½¿ç”¨ Bun.spawn
const proc = Bun.spawn(["bun", "run", "tool.ts"]);

// @agentxjs/tool - å¿«é€Ÿå·¥å…·æ‰§è¡Œ
await Bun.$`npm install axios && node tool.js`;
```

## æ—¶é—´ä¼°ç®—ï¼ˆæ¿€è¿›ç‰ˆï¼‰

| é˜¶æ®µ                    | é¢„è®¡æ—¶é—´    | ç­–ç•¥         |
| ----------------------- | ----------- | ------------ |
| é˜¶æ®µ 1: å¼ºåˆ¶è¿ç§» + ä¿®å¤ | 3-5 å¤©      | ğŸ”¥ ç ´é‡œæ²‰èˆŸ  |
| é˜¶æ®µ 2: æ ¹ç›®å½•é‡æ„      | 1 å¤©        | ğŸ”¥ ä¸€æ¬¡åˆ°ä½  |
| é˜¶æ®µ 3: å„åŒ…é‡å†™        | 2-3 å¤©      | ğŸ”¥ å¹¶è¡Œå¤„ç†  |
| é˜¶æ®µ 4: CI/CD æ›´æ–°      | 1 å¤©        | ğŸ”¥ å¿«é€Ÿè¿­ä»£  |
| é˜¶æ®µ 5: æ–‡æ¡£æ›´æ–°        | 0.5 å¤©      | ğŸ”¥ è¾¹åšè¾¹å†™  |
| **æ€»è®¡**                | **7-10 å¤©** | **å…¨åŠ›æ¨è¿›** |

**åŠ é€Ÿç­–ç•¥**:

- ä¸ç­‰éªŒè¯ï¼Œç›´æ¥åŠ¨æ‰‹
- é‡åˆ°é—®é¢˜ç«‹å³è§£å†³ï¼Œä¸æ‹–å»¶
- å¹¶è¡Œå¤„ç†å¤šä¸ªåŒ…
- ç®€åŒ–ä¸å¿…è¦çš„åŠŸèƒ½

## æ‰§è¡Œç­–ç•¥

### ä¸€æ¬¡æ€§å…¨é¢è¿ç§»

**ä¸é‡‡ç”¨æ¸è¿›å¼**ï¼Œç›´æ¥å…¨é¢åˆ‡æ¢ï¼š

1. **Day 1**: åˆ é™¤æ‰€æœ‰ pnpm ç›¸å…³æ–‡ä»¶ï¼Œå¼ºåˆ¶ä½¿ç”¨ Bun
2. **Day 2-4**: ä¿®å¤æ‰€æœ‰ä¸å…¼å®¹çš„åœ°æ–¹
3. **Day 5**: éªŒè¯å¹¶åˆå¹¶

### é—®é¢˜ä¿®å¤ä¼˜å…ˆçº§

é‡åˆ°é—®é¢˜çš„å¤„ç†é¡ºåºï¼š

**P0 - å¿…é¡»ç«‹å³è§£å†³**:

- better-sqlite3 ä¸å·¥ä½œ â†’ åˆ‡æ¢åˆ° `bun:sqlite`
- æ„å»ºå®Œå…¨å¤±è´¥ â†’ é‡å†™ build è„šæœ¬
- æµ‹è¯•æ¡†æ¶å´©æºƒ â†’ é‡å†™æµ‹è¯•æ–‡ä»¶

**P1 - å½“å¤©è§£å†³**:

- sharp æŠ¥é”™ â†’ æ›¿æ¢ä¸º `@napi-rs/image`
- node-pty é—®é¢˜ â†’ ç”¨ `Bun.spawn()` é‡å†™
- éƒ¨åˆ†æµ‹è¯•å¤±è´¥ â†’ ä¿®æ”¹æµ‹è¯•ä»£ç 

**P2 - å¯ä»¥å»¶å**:

- æ€§èƒ½ä¼˜åŒ–
- é…ç½®ä¼˜åŒ–
- æ–‡æ¡£æ›´æ–°

### å¼ºåˆ¶è¿ç§»æ¸…å•

**å¿…é¡»åˆ é™¤çš„æ–‡ä»¶**:

```bash
rm -rf node_modules
rm pnpm-lock.yaml
rm pnpm-workspace.yaml
rm -rf packages/*/node_modules
```

**å¿…é¡»åˆ é™¤çš„ä¾èµ–**:

```json
{
  "devDependencies": {
    // âŒ åˆ é™¤è¿™äº›
    "pnpm": "...",
    "vitest": "...",
    "tsup": "...",
    "tsx": "...",
    "@vitest/ui": "...",
    "vite-tsconfig-paths": "..." // Bun åŸç”Ÿæ”¯æŒ
  }
}
```

**å¿…é¡»æ·»åŠ çš„é…ç½®**:

```toml
# bunfig.toml
[install]
exact = true
peer = true

[test]
coverage = true
preload = ["./test/setup.ts"]

[run]
bun = true
```

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³**: åˆ›å»º `feat/bun-migration` åˆ†æ”¯
2. **æœ¬å‘¨**: å®Œæˆé˜¶æ®µ 1 å¯è¡Œæ€§éªŒè¯
3. **ä¸‹å‘¨**: æ ¹æ®éªŒè¯ç»“æœå†³å®šæ˜¯å¦ç»§ç»­

## å‚è€ƒèµ„æ–™

- [Bun Official Docs](https://bun.sh/docs)
- [Bun Migration Guide](https://bun.sh/guides/ecosystem/migrate-from-node)
- [Bun Test Runner](https://bun.sh/docs/cli/test)
- [Bun Build](https://bun.sh/docs/bundler)

## å¤‡æ³¨

æ­¤æ¬¡è¿ç§»æ˜¯ AgentX æˆä¸ºç»Ÿä¸€ AI Runtime Platform çš„å…³é”®ä¸€æ­¥ã€‚å®Œæˆåå°†ä¸º `@agentxjs/tool` å’Œ `@agentxjs/sandbox` çš„å¼€å‘æä¾›æ›´å¥½çš„åŸºç¡€ã€‚

---

**ç›¸å…³ Issue**:

- #008 - Logging System Cleanup
- #005 - AgentX Framework Architecture

**æ ‡ç­¾**: `enhancement`, `infrastructure`, `performance`
